name: render_deploy
on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Validate secret
        run: |
          if [ -z "${{ secrets.RENDER_DEPLOY_HOOK }}" ]; then
            echo "❌ Missing secret: RENDER_DEPLOY_HOOK" && exit 1
          fi
      - name: Trigger Render Deploy
        run: |
          curl -fsS -X POST "${{ secrets.RENDER_DEPLOY_HOOK }}" \
          && echo "✅ Render deploy triggered"
